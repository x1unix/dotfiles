# Load OS-specific configs and defines

# Store uname output in environment variable
run-shell 'tmux setenv -g TMUX_UNAME "$(uname)"'

# Detect platform and load appropriate config
if-shell '[ -n "$ANDROID_DATA" ] && [ "$TMUX_UNAME" = "Linux" ]' \
    'source-file ~/.config/tmux/android.conf'

if-shell '[ -z "$ANDROID_DATA" ] && [ "$TMUX_UNAME" = "Linux" ]' \
    'source-file ~/.config/tmux/linux.conf'

if-shell '[ "$TMUX_UNAME" = "Darwin" ]' \
    'source-file ~/.config/tmux/darwin.conf'

# if-shell -F '#{env:ANDROID_DATA}' \
#   'source-file ~/.config/tmux/android.conf' \
#   'if-shell "uname -s | grep -qi darwin" \
#       "source-file ~/.config/tmux/darwin.conf" \
#       "source-file ~/.config/tmux/linux.conf"'

# %if "#{m:Darwin,#{uname}}"
#   source-file ~/.config/tmux/darwin.conf
# %elif "#{env:ANDROID_DATA}"
#   # Android / Termux
#   display-message "Using termux configs"
#   source-file ~/.config/tmux/android.conf
# %elif "#{m:Linux,#{uname}}"
#   display-message "Using Linux configs"
#   source-file ~/.config/tmux/linux.conf
# %else
#   display-message "Cannot load os-specific settings, unsupported OS: #{uname}"
# %endif

# Common configs
source-file ~/.config/tmux/common.conf

# TPM should be loaded at the end
source-file ~/.config/tmux/tpm.conf
