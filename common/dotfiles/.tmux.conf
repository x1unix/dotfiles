# Load OS-specific configs and defines

# Store uname output in environment variable
run-shell 'tmux setenv -g TMUX_UNAME "$(uname)"'

# Detect platform and load appropriate config
if-shell '[ -n "$ANDROID_DATA" ] && [ "$TMUX_UNAME" = "Linux" ]' \
    'source-file ~/.config/tmux/android.conf'

if-shell '[ -z "$ANDROID_DATA" ] && [ "$TMUX_UNAME" = "Linux" ]' \
    'source-file ~/.config/tmux/linux.conf'

if-shell '[ "$TMUX_UNAME" = "Darwin" ]' \
    'source-file ~/.config/tmux/darwin.conf'

%if "#{==:#{@g_platform},}"
display-message "Warning: @g_platform not defined - platform config may not have loaded correctly"
%endif

# Common configs
source-file ~/.config/tmux/common.conf

# TPM should be loaded at the end
source-file ~/.config/tmux/tpm.conf
